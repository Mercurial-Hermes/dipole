Thin Slice Roadmap — Dipole v0.2.0 (Updated for TS4)
====================================================

This document tracks the thin-slice iteration plan for Dipole v0.2. Each slice answers one architectural question, introduces one new kind of structure, and then stops.

The goal is not speed, but irreversibility: once a slice lands, its invariants are locked by tests and artifacts.

Guiding Principles
------------------

- One conceptual question per slice
- Semantic layers before execution
- Meaning before intent, intent before authority
- Downstream-only dataflow until the execution membrane
- Tests lock shape, not convenience
- No slice retrofits invariants from earlier slices

Completed Slices (Sealed)
-------------------------

### TS1 — Event-Sourced Truth

**Status:** ✅ Passed (sealed)

- Event log is the sole source of truth
- Events are raw transport observations only
- Append-only, ordered, replayable
- No semantic interpretation at ingestion time

### TS2 — Semantic Projections

**Status:** ✅ Passed (sealed)

**TS2-001 — First Semantic Projection**

- Proved semantic meaning can be derived from the event log
- Established purity, replay determinism, ordering inheritance
- Introduced first semantic object (EventKind)

**TS2-002 — Projection Identity & Registry**

- Introduced stable identity for semantic meaning
- Established declarative, inert projection registry
- Locked explicit versioning and coexistence
- Declared semantic dependency surfaces (permitted_fields)
- Registry is non-operational by construction

**TS2-003 — Projection Contract Drift**

- Enforced semantic dependency surfaces via tests
- Proved non-dependence on irrelevant fields
- Prevented semantic drift without runtime enforcement

### TS3 — Semantic Consumption & Distribution

**Status:** ✅ Passed (sealed)

**TS3-001 — First Consumer Boundary (CLI)**

- CLI consumers (list, show, eval) are read-only
- Explicit ProjectionId@version required everywhere
- No implicit “latest”
- Replay-equivalent to direct projection execution

**TS3-010 — Projection Feed (Pub/Sub)**

- Downstream-only semantic feed distributing Frames
- Frames keyed by explicit ProjectionId@version
- Replay-deterministic, rebuildable from the event log
- No raw event access or projection execution possible

**TS3-UI-001 — REPL & tmux Reintroduction (Read-Only)**

- UI surfaces consume Frames only
- No authority, no execution, no mutation
- Rendered output is deterministic and replay-equivalent

Entering TS4 — Interaction & Control
------------------------------------

Key shift: TS1–TS3 answer how meaning is derived and observed. TS4 introduces how intent and agency are expressed — without contaminating semantics.

TS4 sits above the sealed semantic pipeline.

```
Event Log → Projection → Frame → Consumer   ← sealed
                     ↑
                 TS4 Intent
```

TS4 must treat all TS3 outputs as observational only.

### TS4-001 — Intent Introduction (Control Plane Entry)

**Core question:** How does a user express intent without granting authority to consumers or contaminating semantic purity?

Introduces:
- A first-class Intent representation: immutable, typed, versioned, non-authoritative
- A single, explicit user-visible intent entry point (CLI or REPL)
- Validation of intent without execution

Key invariants:
- Intent is not an Event
- Intent is not replayed
- Intent carries no authority on its own
- Semantic pipeline remains unchanged

Explicitly excludes:
- Execution
- Planners
- Async control
- UI-driven mutation
- Any change to projections, feed, or consumers

### TS4-002 — Intent Routing to Authority (Minimal)

**Core question:** How does validated intent reach the authoritative execution membrane?

Introduces:
- Explicit routing of validated intent to the Controller
- Authority remains confined to Driver / Controller
- Execution may emit new Events only

Key invariants:
- All effects are observed via Events
- No semantic shortcuts
- No UI → execution coupling
- Replay reconstructs effects, not choices

Explicitly excludes:
- Complex planners
- Interactive stepping
- Live debugging sessions
- Multi-intent workflows

v0.2 Definition of “Done” (Updated)
-----------------------------------

Dipole v0.2 is considered complete when:
- TS1–TS3 semantic pipeline is sealed and replay-stable
- CLI, REPL, and tmux panes display live semantic views (read-only)
- A user can express one explicit intent via the dipole binary
- Validated intent may result in new Events via the Controller

New Events flow through the existing semantic pipeline unchanged

Replay determinism holds end-to-end (Events → Frames → Rendered output)

Explicit Non-Goals for v0.2

Interactive debugging sessions

Stepping, breakpoints, watch expressions

Async planners or schedulers

UI-initiated execution

Implicit versioning (“latest”)

Semantic mutation or shortcuts

Raw event access outside TS1

Notes on Scope Discipline

No slice introduces both meaning and authority

TS4 introduces agency, not new semantics

UI remains observational

Authority remains upstream and explicit

Each slice ends with tests, docs, and a merge milestone

Summary

This roadmap now reflects Dipole’s true structure:

truth → meaning → distribution → observation → intent → authority

TS4 is deliberately small, explicit, and boring —
so that everything built on top of it can be trusted.
